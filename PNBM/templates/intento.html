<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamiento de Encuentro</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <!-- Agregamos Font Awesome -->
    <style>
        color-change-button {
            padding: 10px 20px;
            background: linear-gradient(90deg,#2ecc71 , #3498db);
            color: white;
            border: none;
            transition: background-color 0.3s;
        }
        body {
            background: linear-gradient(90deg, #3498db, #2ecc71);
        }
        .color-change-button {
            width: 100%;
            height: 50px;
            margin-top: 60px;
            color: #ffffff; /* Cambio de color del texto */
            border: 0px;
            background: linear-gradient(90deg, #34addb, #2ecc71);
            font-weight: 300;
            cursor: pointer;
            font-size: 18px;
        }
        
        .color-change-button:hover {
            background: linear-gradient(90deg, #2ecc71, #34addb);
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <div class="card">
                    <div class="card-body">
                        <a href="#" onclick="history.go(-1);" class="btn btn-secondary mb-3"><i class="fas fa-arrow-left"></i> Volver</a>
                        <h2 class="card-title text-center">Agendamiento de Encuentro</h2>
                        <form onsubmit="return validateForm()">
                            <div class="form-group">
                                <label for="Documento">Documento</label>
                                <select class="form-control" id="Documento" name="Documento" required>
                                    <option value="Cedula de ciudadania">C.C</option>
                                    <option value="tarjeta de identidad">T.I</option>
                                    <option value="Cedula de extranjeria">C.T</option>
                                    <option value="Permiso Especial de Permanencia">P.P</option>
                                    <option value="Permiso por proteccion temporal">P.T</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="nombre" size="40">Nombre</label>
                                <input type="text" class="form-control" id="nombre" placeholder="Nombre" autocomplete="additional-name" required>
                            </div>
                            <form action="ejemplo.php" method="get">
                                <label for="telefono">Año de nacimiento</label>
                                <input type="number" class="form-control" name="nacido" min="1900" max="2023" required>
                                <p>Sexo:
                                  <input type="radio" name="hm" value="h"> Hombre
                                  <input type="radio" name="hm" value="m"> Mujer
                                  <input type="radio" name="hm" value="m"> Otro
                                </p>
                                <p>Edad:
                                    <input type="radio" name="edad" value="menor"> Menor
                                    <input type="radio" name="edad" value="adulto" required> Adulto
                                  </p>
                            </form>
                            <div class="form-group">
                                <label for="email">Correo Electrónico</label>
                                <input type="email" class="form-control" id="email" placeholder="example@example.com" required>
                            </div>
                            <div class="form-group">
                                <label for="telefono">Teléfono</label>
                                <input type="tel" class="form-control" id="telefono" placeholder="310-571-3563" required>
                            </div>
                            <div class="form-group">
                                <label for="jornada">Seleccione una Jornada</label>
                                <select class="form-control" id="jornada" name="jornada" required>
                                    <option value="mañana">Jornada de la Mañana (6 AM - 12 PM)</option>
                                    <option value="tarde">Jornada de la Tarde (1 PM - 6 PM)</option>
                                    <option value="noche">Jornada de la Noche (7 PM - 10 PM)</option>
                                    <option value="madrugada">Jornada de la Madrugada (10 PM - 6 AM)</option>
                                    <option value="finesdesemana">Jornada de Fines de semana (8 AM - 5 PM)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="Psicologo">Psicologo</label>
                                <select class="form-control" id="medico" required>
                                    <option value="">Selecciona un Psicologo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="fecha">Fecha de Encuentro</label>
                                <input type="date" class="form-control" id="fecha" required>
                            </div>
                            
                                <label for="fecha">razones del Encuentro</label>
                            <select class="form-control" id="motivoSelector" name="motivo" onchange="toggleRazon()">
                                <option value="determinado">Determinado</option>
                                <option value="razon">razones</option>
                            </select>
                            <textarea class="form-control" id="razon" rows="4" required minlength="20" maxlength="100"></textarea>
                       
                              <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="terminos" required>
                                <label class="form-check-label" for="terminos">Acepto los <a href="https://terminosya.com/">términos y condiciones</a></label>
                            </div>
                            <!-- Resto del formulario sin cambios -->
                            <button type="submit" class="color-change-button btn btn-primary btn-block mt-3" id="reagendar">Agendar Encuentro</button>                        
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // JavaScript para filtrar las opciones de psicólogos según la jornada
        const PsicologoSelect = document.getElementById("medico");
        const jornadaSelect = document.getElementById("jornada");
        
        // Define un objeto con opciones de psicólogos por jornada
        const opcionesPsicologos = {
            mañana: ["Maria Camila Vega", "Rosa Telma Cortes", "Daniela Ortiz", "Magerli Flores"],
            tarde: ["Claudia escobar", "Rosa Lina Diaz Alvarado", "Carolina Claros"],
            noche: ["Claudia escobar", "Rosa Lina Diaz Alvarado", "Carolina Claros"],
            madrugada: ["felipe Alfaros"],
            finesdesemana: ["Juana Molina"]
        };
        
        // Agrega un evento de cambio a la selección de jornada
        jornadaSelect.addEventListener("change", actualizarOpcionesPsicologos);
        
        // Función para actualizar las opciones de psicólogos
        function actualizarOpcionesPsicologos() {
            const selectedJornada = jornadaSelect.value;
            const psicologos = opcionesPsicologos[selectedJornada];
            
            // Limpia las opciones actuales del campo Psicologo
            PsicologoSelect.innerHTML = "";
            
            // Agrega las nuevas opciones de psicólogos
            psicologos.forEach(psicologo => {
                const option = document.createElement("option");
                option.value = psicologo;
                option.textContent = psicologo;
                PsicologoSelect.appendChild(option);
            });
        }
        
        // Función para validar el formulario
        function validateForm() {
            const telefonoInput = document.getElementById("telefono");
            const razonInput = document.getElementById("razon");
            const emailInput = document.getElementById("email");
            
            // Validación de número de teléfono (exactamente 10 dígitos)
            if (telefonoInput.value.replace(/\D/g, "").length !== 10) {
                alert("El número de teléfono debe tener exactamente 10 dígitos.");
                return false;
            }
            
            // Validación de la razón de encuentro (máximo 100 caracteres)
            function validateForm() {
                const telefonoInput = document.getElementById("telefono");
                const razonInput = document.getElementById("razon");
                const emailInput = document.getElementById("email");
                
                // Validación de número de teléfono (exactamente 10 dígitos)
                if (telefonoInput.value.replace(/\D/g, "").length !== 10) {
                    alert("El número de teléfono debe tener exactamente 10 dígitos.");
                    return false;
                }
                
                // Validación de la razón de encuentro (entre 20 y 100 caracteres)
                function toggleRazon() {
                    var motivoSelector = document.getElementById("motivoSelector");
                    var razonTextarea = document.getElementById("razon");
                
                    if (motivoSelector.value === "determinado") {
                        razonTextarea.disabled = true;
                        razonTextarea.value = "Minimo 20 y máximo 100 caracteres";
                        razonTextarea.setCustomValidity(""); // Limpia la validación personalizada
                    } else {
                        razonTextarea.disabled = false;
                        razonTextarea.value = ""; // Limpia el área de texto para permitir la escritura
                        razonTextarea.setCustomValidity("La razón debe tener entre 20 y 100 caracteres");
                    }
                }
                
                // Validación de espacios en los campos
                const fields = [telefonoInput, razonInput, emailInput];
                for (const field of fields) {
                    if (field.value.trim() === "") {
                        alert("Ningún campo debe estar vacío o contener solo espacios en blanco.");
                        return false;
                    }
                }
                
                // Validación de correo electrónico sin espacios
                if (emailInput.value.indexOf(" ") !== -1) {
                    alert("El correo electrónico no puede contener espacios.");
                    return false;
                }
                
                return true; // Permite el envío del formulario si todas las validaciones son exitosas
            }
            
            }
            // Validación de espacios en los campos
            const fields = [telefonoInput, razonInput, emailInput];
            for (const field of fields) {
                if (field.value.trim() === "") {
                    alert("Ningún campo debe estar vacío o contener solo espacios en blanco.");
                    return false;
                }
            }
            
            // Validación de correo electrónico sin espacios
            if (emailInput.value.indexOf(" ") !== -1) {
                alert("El correo electrónico no puede contener espacios.");
                return false;
            }
            
            return true; // Permite el envío del formulario si todas las validaciones son exitosas
        }

        function toggleRazon() {
            var motivoSelector = document.getElementById("motivoSelector");
            var razonTextarea = document.getElementById("razon");
        
            if (motivoSelector.value === "determinado") {
                razonTextarea.disabled = true;
                razonTextarea.value = "Minimo 100 caracteres";
            } else {
                razonTextarea.disabled = false;
                razonTextarea.value = ""; // Limpia el área de texto para permitir la escritura
            }
        }
    </script>
</body>
</html>
